<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>ç¬¬äºŒé—œ é»æ“Šç“¶å­ä½œç­”</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #e0f7fa;
      background-image: url("images/bg03.jpeg");
      background-size: cover;
      background-position: center;
      text-align: center;
      color: #fff;
    }

    h1 {
      margin-top: 30px;
      color: #ffffff;
      text-shadow: 1px 1px 4px #000;
    }

    .bottle-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 40px;
    }

    .bottle {
      width: 80px;
      height: 120px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .bottle:hover {
      transform: scale(1.1);
    }

    #result {
      font-size: 24px;
      margin-top: 20px;
      color: #fff;
      font-weight: bold;
      text-shadow: 1px 1px 2px #000;
    }

    #restartButton,
    #nextButton,
    #musicToggle {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      color: white;
    }

    #restartButton, #nextButton {
      display: none;
      background-color: #00796b;
    }

    #nextButton {
      background-color: #ff9800;
      margin-left: 10px;
    }

    #musicToggle {
      background-color: #3f51b5;
      position: fixed;
      top: 20px;
      right: 20px;
    }

    /* Modal é¡Œç›®è¦–çª—æ¨£å¼ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }

    .modal-content {
      background-color: #ffffff;
      margin: 15% auto;
      padding: 20px;
      border-radius: 12px;
      width: 80%;
      max-width: 400px;
      color: black;
      text-align: left;
    }

    .modal-content h2 {
      font-size: 20px;
    }

    .modal-content button {
      display: block;
      margin: 10px 0;
      padding: 8px;
      width: 100%;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .close-button {
      background-color: gray !important;
      color: white;
    }
  </style>
</head>
<body>
  <h1>ğŸ’§ ç¬¬äºŒé—œ æ°´è³‡æºå•ç­”</h1>
  <p>é»æ“Šæ¯å€‹ç“¶å­é€²è¡Œä½œç­”ï¼Œå…± 7 é¡Œï¼Œç­”å° 4 é¡Œä»¥ä¸Šå³éé—œ</p>
  <div class="bottle-container" id="bottleContainer"></div>
  <div id="result"></div>
  <button id="restartButton" onclick="startGame()">é‡æ–°é–‹å§‹</button>
  <button id="nextButton" onclick="location.href='GAME3.html'">ä¸‹ä¸€é—œ</button>
  <button id="musicToggle">ğŸ”Š éŸ³æ¨‚é–‹</button>

  <!-- é¡Œç›®å½ˆå‡ºè¦–çª— -->
  <div id="questionModal" class="modal">
    <div class="modal-content">
      <h2 id="modalQuestion">é¡Œç›®</h2>
      <div id="modalOptions"></div>
      <div id="modalFeedback" style="margin-top: 10px; font-weight: bold;"></div>
      <button class="close-button" onclick="closeModal()">å–æ¶ˆ</button>
    </div>
  </div>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="backgroundMusic" src="music1.mp3" preload="auto" loop autoplay></audio>

  <script>
    const questions = [
      {
        question: "ä¸‹åˆ—å“ªä¸€é …æ˜¯ç¯€ç´„ç”¨æ°´çš„æ–¹æ³•ï¼Ÿ",
        options: [
          { text: "æ¯æ¬¡æ´—æ‰‹éƒ½ä¸é—œæ°´é¾é ­", correct: false },
          { text: "æ´—æ¾¡æ™‚æ¸›å°‘ç”¨æ°´æ™‚é–“", correct: true },
          { text: "å°‡æ´—èœæ°´ç›´æ¥å€’æ‰", correct: false }
        ]
      },
      {
        question: "åœ°çƒä¸Šç´„æœ‰å¤šå°‘æ°´æ˜¯å¯ä¾›äººé¡ç›´æ¥ä½¿ç”¨çš„æ·¡æ°´ï¼Ÿ",
        options: [
          { text: "97%", correct: false },
          { text: "10%", correct: false },
          { text: "å°‘æ–¼ 1%", correct: true }
        ]
      },
      {
        question: "å“ªä¸€ç¨®æ°´è³‡æºå›æ”¶æ–¹å¼å¯ä»¥é‡è¤‡ä½¿ç”¨æ°´ï¼Ÿ",
        options: [
          { text: "å°‡é›¨æ°´æ”¶é›†ç”¨ä¾†æ¾†èŠ±", correct: true },
          { text: "å°‡æ´—è¡£æ°´ç›´æ¥æ’å…¥æ²³å·", correct: false },
          { text: "ç”¨ç“¶è£æ°´æ´—è¡£æœ", correct: false }
        ]
      },
      {
        question: "åœ¨ç¼ºæ°´åœ°å€ï¼Œå“ªç¨®åšæ³•å¯ä»¥æ”¹å–„é£²ç”¨æ°´å•é¡Œï¼Ÿ",
        options: [
          { text: "æŠŠæµ·æ°´ç…®æ²¸å–æ‰", correct: false },
          { text: "ä½¿ç”¨å¤ªé™½èƒ½æ·¨æ°´å™¨", correct: true },
          { text: "æŒ–æ›´æ·±çš„äº•", correct: false }
        ]
      },
      {
        question: "æ°´è³‡æºæ±™æŸ“çš„ä¸»è¦åŸå› ä¹‹ä¸€æ˜¯ï¼Ÿ",
        options: [
          { text: "æ¤æ¨¹é€ æ—", correct: false },
          { text: "å·¥æ¥­å»¢æ°´æ’å…¥æ²³å·", correct: true },
          { text: "é£²ç”¨ç¤¦æ³‰æ°´", correct: false }
        ]
      },
      {
        question: "SDG 6 çš„æ ¸å¿ƒç›®æ¨™æ˜¯ä»€éº¼ï¼Ÿ",
        options: [
          { text: "æé«˜æ°´åƒ¹è³ºéŒ¢", correct: false },
          { text: "ç¢ºä¿æ‰€æœ‰äººéƒ½èƒ½ç²å¾—ä¹¾æ·¨çš„æ°´èˆ‡è¡›ç”Ÿè¨­æ–½", correct: true },
          { text: "å»ºé€ æ›´å¤šæ¸¸æ³³æ± ", correct: false }
        ]
      },
      {
        question: "ç‚ºä»€éº¼æˆ‘å€‘è¦æ„›æƒœæ°´è³‡æºï¼Ÿ",
        options: [
          { text: "å› ç‚ºæ°´å¯ä»¥å…è²»å–å¾—", correct: false },
          { text: "å› ç‚ºåœ°çƒæ°´è³‡æºæ˜¯ç„¡é™çš„", correct: false },
          { text: "å› ç‚ºæ°´æ˜¯ç”Ÿæ´»èˆ‡å¥åº·ä¸å¯æˆ–ç¼ºçš„è³‡æº", correct: true }
        ]
      }
    ];

    let answered = [];
    let score = 0;
    const hoverSound = new Audio("https://www.soundjay.com/buttons/sounds/button-16.mp3");
    const backgroundMusic = document.getElementById("backgroundMusic");
    const musicToggleBtn = document.getElementById("musicToggle");

    window.addEventListener("load", () => {
      const playPromise = backgroundMusic.play();
      if (playPromise !== undefined) {
        playPromise.catch((error) => {
          console.warn("ç€è¦½å™¨å¯èƒ½é˜»æ­¢äº†è‡ªå‹•æ’­æ”¾:", error);
        });
      }
    });

    musicToggleBtn.addEventListener("click", () => {
      if (backgroundMusic.paused) {
        backgroundMusic.play();
        musicToggleBtn.textContent = "ğŸ”Š éŸ³æ¨‚é–‹";
      } else {
        backgroundMusic.pause();
        musicToggleBtn.textContent = "ğŸ”‡ éŸ³æ¨‚é—œ";
      }
    });

    function startGame() {
      const container = document.getElementById("bottleContainer");
      container.innerHTML = "";
      answered = [];
      score = 0;
      document.getElementById("result").textContent = "";
      document.getElementById("restartButton").style.display = "none";
      document.getElementById("nextButton").style.display = "none";

      for (let i = 0; i < 7; i++) {
        const img = document.createElement("img");
        img.src = "https://bing.com/th/id/BCO.b395f458-242d-4fc4-a524-c7bf45073c8f.png";
        img.className = "bottle";
        img.onclick = () => askQuestion(i, img);
        img.addEventListener("mouseenter", () => {
          hoverSound.currentTime = 0;
          hoverSound.play();
        });
        container.appendChild(img);
      }
    }

    function askQuestion(index, imgEl) {
      if (answered.includes(index)) return;

      const q = questions[index];
      const modal = document.getElementById("questionModal");
      const modalQuestion = document.getElementById("modalQuestion");
      const modalOptions = document.getElementById("modalOptions");
      const modalFeedback = document.getElementById("modalFeedback");

      modalQuestion.textContent = `é¡Œç›® ${index + 1}ï¼š${q.question}`;
      modalOptions.innerHTML = "";
      modalFeedback.textContent = "";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.textContent = `${String.fromCharCode(65 + i)}. ${opt.text}`;
        btn.onclick = () => {
          if (opt.correct) {
            modalFeedback.textContent = "âœ… ç­”å°äº†ï¼";
            modalFeedback.style.color = "green";
            score++;
            imgEl.style.opacity = 0.4;
          } else {
            modalFeedback.textContent = "âŒ ç­”éŒ¯äº†ï¼";
            modalFeedback.style.color = "red";
            imgEl.style.opacity = 0.2;
          }

          imgEl.style.pointerEvents = "none";
          answered.push(index);

          setTimeout(() => {
            closeModal();
            if (answered.length === 7) {
              showResult();
            }
          }, 1000);
        };
        modalOptions.appendChild(btn);
      });

      modal.style.display = "block";
    }

    function closeModal() {
      document.getElementById("questionModal").style.display = "none";
    }

    function showResult() {
      const resultEl = document.getElementById("result");
      if (score >= 4) {
        resultEl.textContent = `ğŸ‰ ä½ ç­”å°äº† ${score} é¡Œï¼Œéé—œäº†ï¼`;
        document.getElementById("nextButton").style.display = "inline-block";
      } else {
        resultEl.textContent = `ğŸ˜¢ ä½ åªç­”å°äº† ${score} é¡Œï¼Œè«‹å†æ¥å†å²ï¼`;
      }
      document.getElementById("restartButton").style.display = "inline-block";
    }

    startGame();
  </script>
</body>
</html>
